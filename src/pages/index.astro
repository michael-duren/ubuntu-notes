---
import BaseLayout from '../layouts/BaseLayout.astro';
import CategoryCard from '../components/CategoryCard.astro';
import shortcuts from '../data/shortcuts.json';

const windowCount = shortcuts.filter(s => s.category === 'window-management').length;
const desktopCount = shortcuts.filter(s => s.category === 'desktop-management').length;
const tabCount = shortcuts.filter(s => s.category === 'tab-management').length;
const editorCount = shortcuts.filter(s => s.category === 'text-editors').length;
---
<BaseLayout title="Home">
  <!-- Hero -->
  <section class="bg-ubuntu-orange text-white py-16 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Ubuntu Keyboard Shortcuts</h1>
      <p class="text-lg md:text-xl text-white/90 mb-6">
        Quick reference cheatsheets and configuration guides for mastering Ubuntu.
      </p>
      <button
        id="hero-search"
        class="inline-flex items-center gap-2 px-6 py-3 bg-white text-ubuntu-orange font-semibold rounded-lg hover:bg-white/90 transition-colors cursor-pointer"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        Search all shortcuts
        <kbd class="px-2 py-0.5 text-xs bg-ubuntu-orange/10 rounded font-mono">Ctrl+K</kbd>
      </button>
    </div>
  </section>

  <div class="max-w-6xl mx-auto px-4 py-12">
    <!-- Cheat Sheets Grid -->
    <section class="mb-16">
      <h2 class="text-2xl font-bold mb-2" style="color: var(--text-primary);">Cheat Sheets</h2>
      <p class="mb-6" style="color: var(--text-secondary);">Default keyboard shortcuts by category.</p>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <CategoryCard
          title="Window Management"
          description="Snap, move, resize, and switch between windows."
          href="/cheatsheets/window-management"
          count={windowCount}
          icon="window"
        />
        <CategoryCard
          title="Desktop Management"
          description="Workspaces, system shortcuts, and navigation."
          href="/cheatsheets/desktop-management"
          count={desktopCount}
          icon="desktop"
        />
        <CategoryCard
          title="Tab Management"
          description="Browser, terminal, and file manager tabs."
          href="/cheatsheets/tab-management"
          count={tabCount}
          icon="tab"
        />
        <CategoryCard
          title="Text Editors"
          description="Neovim/Vim modes, navigation, editing, and splits."
          href="/cheatsheets/text-editors"
          count={editorCount}
          icon="editor"
        />
      </div>
    </section>

    <!-- Configuration Guides Grid -->
    <section>
      <h2 class="text-2xl font-bold mb-2" style="color: var(--text-primary);">Configuration Guides</h2>
      <p class="mb-6" style="color: var(--text-secondary);">Learn how to customize and configure shortcuts.</p>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <CategoryCard
          title="Window Management"
          description="Customize window snapping, tiling, and keybindings."
          href="/guides/window-management"
          icon="guide"
        />
        <CategoryCard
          title="Desktop & Workspaces"
          description="Configure workspace behavior, hot corners, and navigation."
          href="/guides/desktop-management"
          icon="guide"
        />
        <CategoryCard
          title="Tab Management"
          description="Customize tab shortcuts across browsers and terminals."
          href="/guides/tab-management"
          icon="guide"
        />
        <CategoryCard
          title="Text Editors"
          description="Configure Neovim, Vim, VS Code, and other editors."
          href="/guides/text-editors"
          icon="guide"
        />
        <CategoryCard
          title="Linux Filesystem"
          description="Beginner's guide to the Ubuntu directory structure."
          href="/guides/linux-filesystem"
          icon="folder"
        />
      </div>
    </section>
  </div>
</BaseLayout>

<script>
  function initHeroSearch() {
    document.getElementById('hero-search')?.addEventListener('click', () => {
      document.getElementById('search-modal')?.classList.remove('hidden');
      (document.getElementById('search-input') as HTMLInputElement)?.focus();
    });
  }
  initHeroSearch();
  document.addEventListener('astro:after-swap', initHeroSearch);
</script>
